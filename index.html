<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>裂隙城战 Rift Castle - 调试版</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background: #000; /* 黑色背景 */
        overflow: hidden;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
      }

      /* 游戏容器，占满全屏 */
      #game-container {
        position: fixed;
        inset: 0;
      }

      /* 左上角调试信息 */
      #debug-log {
        position: fixed;
        top: 8px;
        left: 8px;
        max-width: 90vw;
        max-height: 90vh;
        background: rgba(255, 255, 255, 0.9);
        color: #000;
        padding: 8px 10px;
        font-size: 12px;
        line-height: 1.4;
        font-family: monospace;
        white-space: pre-wrap;
        z-index: 9999;
        overflow-y: auto;
      }

      /* 初始提示文字，说明 HTML 是否生效 */
      #initial-text {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #ffffff;
        font-size: 16px;
        text-align: center;
        z-index: 1;
      }
    </style>
  </head>
  <body>
    <!-- 初始提示：如果看到这段话，说明 index.html 已经生效 -->
    <div id="initial-text">
      如果你能看到这段文字，说明 index.html 已经生效。<br />
      稍等几秒，看左上角是否出现调试日志。
    </div>

    <!-- 游戏容器（Phaser 会挂在这里） -->
    <div id="game-container"></div>

    <!-- 调试日志 -->
    <div id="debug-log">[LOG] 页面 HTML 已加载\n</div>

    <!-- 错误捕获 & 启动脚本 -->
    <script>
      const logEl = document.getElementById('debug-log');
      function log(msg) {
        logEl.textContent += '\n' + msg;
      }

      log('[LOG] inline script 执行开始');

      // 捕获同步错误
      window.onerror = function (message, source, lineno, colno, error) {
        log(
          '❌ window.onerror: ' +
            message +
            '\n源文件: ' +
            source +
            ':' +
            lineno +
            ':' +
            colno
        );
        return false;
      };

      // 捕获 Promise / 模块加载 错误
      window.addEventListener('unhandledrejection', function (event) {
        log('⚠️ unhandledrejection: ' + event.reason);
      });

      log('[LOG] 已挂载 window.onerror 与 unhandledrejection 监听');
    </script>

    <!-- 关键：游戏入口脚本 -->
    <script type="module" src="/src/index.ts" onload="log('[LOG] /src/index.ts 加载完成')" onerror="log('❌ 加载 /src/index.ts 失败')"></script>
  </body>
</html>
